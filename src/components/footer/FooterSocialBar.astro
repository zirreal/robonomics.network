---
import { Image } from 'astro:assets';
import { contacts } from '../../data/socials';

import xIcon from '../../assets/images/icons/x.svg';
import discordIcon from '../../assets/images/icons/discord.svg';
import tgIcon from '../../assets/images/icons/tg.svg';
import instagramIcon from '../../assets/images/icons/instagram.svg';
import tiktokIcon from '../../assets/images/icons/tiktok.svg';
import youtubeIcon from '../../assets/images/icons/youtube.svg';
import ghIcon from '../../assets/images/icons/gh.svg';

// Map social titles to icon files
const iconMap = {
  'X': xIcon,
  'Discord': discordIcon,
  'Telegram': tgIcon,
  'Instagram': instagramIcon,
  'TikTok': tiktokIcon,
  'Youtube': youtubeIcon,
  'Github': ghIcon,
};

// Build links from socials.js data
const links = contacts
  .filter((contact) => iconMap[contact.title])
  .map((contact) => ({
    title: contact.title,
    href: contact.link,
    icon: iconMap[contact.title],
    disabled: contact.link === '#',
  }));
---

<section class="footer-social" aria-label="Community">
  <div class="layout">
    <ul class="footer-social__list" aria-label="Social links">
      {links.map((item) => (
        <li>
          <a
            class:list={["footer-social__link", item.disabled && "is-disabled"]}
            href={item.href}
            target={item.disabled ? undefined : "_blank"}
            rel={item.disabled ? undefined : "noopener noreferrer"}
            aria-label={item.disabled ? `${item.title} (link not set yet)` : item.title}
            aria-disabled={item.disabled ? "true" : undefined}
            tabindex={item.disabled ? "-1" : undefined}
          >
            <Image src={item.icon} alt={item.title} width={32} height={32} loading="lazy" />
          </a>
        </li>
      ))}
    </ul>
  </div>
</section>

<style>
  .footer-social {
    padding: var(--space) 0;
    background-color: var(--color-dark);
    color: var(--color-light);
  }

  .footer-social__label {
    text-transform: uppercase;
    font-size: 0.8rem;
    letter-spacing: 0.06em;
    font-variation-settings: var(--font-flex-bold);
  }

  .footer-social__list {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: calc(var(--space) * 1.2);
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .footer-social__list li {
    margin-bottom: 0;
    width: 32px;
    height: 32px;
    vertical-align: middle;
  }

  .footer-social__link {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    text-decoration: none;
  }

  .footer-social__link :global(img) {
    width: 100%;
    height: 100%;
    filter: brightness(0) invert(1);
    opacity: 0.95;
    transition: opacity 0.15s ease-out, transform 0.15s ease-out;
  }

  .footer-social__link:hover :global(img) {
    opacity: 1;
    transform: translateY(-1px);
  }

  .footer-social__link.is-disabled {
    opacity: 0.4;
    cursor: not-allowed;
  }

  .footer-social__link.is-disabled:hover :global(img) {
    transform: none;
  }

  @media screen and (max-width: 760px) {
    .footer-social__inner {
      flex-direction: column;
      align-items: flex-start;
    }

    .footer-social__list {
      flex-wrap: wrap;
      gap: calc(var(--space) * 0.9);
    }
  }
</style>


